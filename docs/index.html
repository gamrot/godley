<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Stock-Flow-Consistent Model Simulator ‚Ä¢ godley</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Stock-Flow-Consistent Model Simulator">
<meta name="description" content="Define, simulate and validate SFC models. The accounting structure of SFC models are described in Godley and Lavoie (2007, ISBN:978-1-137-08599-3). The algorithms implemented to solve the models are described in Kinsella and O'Shea (2010) &lt;doi:10.2139/ssrn.1729205&gt; and Peressini and Sullivan (1988, ISBN:0-387-96614-5) and Joao Macalos.">
<meta property="og:description" content="Define, simulate and validate SFC models. The accounting structure of SFC models are described in Godley and Lavoie (2007, ISBN:978-1-137-08599-3). The algorithms implemented to solve the models are described in Kinsella and O'Shea (2010) &lt;doi:10.2139/ssrn.1729205&gt; and Peressini and Sullivan (1988, ISBN:0-387-96614-5) and Joao Macalos.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">godley</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/package_outline.html">Introduction</a></li>
    <li><a class="dropdown-item" href="articles/Model_SIM.html">Model SIM</a></li>
    <li><a class="dropdown-item" href="articles/Model_SIMEX.html">Model SIMEX</a></li>
    <li><a class="dropdown-item" href="articles/Model_PC.html">Model PC</a></li>
    <li><a class="dropdown-item" href="articles/Model_LP.html">Model LP</a></li>
    <li><a class="dropdown-item" href="articles/Model_REG.html">Model REG</a></li>
    <li><a class="dropdown-item" href="articles/Model_OPEN.html">Model OPEN</a></li>
    <li><a class="dropdown-item" href="articles/Model_BMW.html">Model BMW</a></li>
    <li><a class="dropdown-item" href="articles/Model_BMWK.html">Model BMWK</a></li>
    <li><a class="dropdown-item" href="articles/Model_DIS.html">Model DIS</a></li>
    <li><a class="dropdown-item" href="articles/Model_DISINF.html">Model DISINF</a></li>
    <li><a class="dropdown-item" href="articles/Model_PCEX.html">Model PCEX</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gamrot/godley" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="godley">godley<a class="anchor" aria-label="anchor" href="#godley"></a>
</h1></div>
<p><code>godley</code> is an R package for simulating <em>stock-flow consistent</em> (SFC) macroeconomic models.</p>
<p>By employing godley, users can create fully fledged post-keynesian and MMT models of the economy to:</p>
<ul>
<li>analyze the sensitivity of parameter changes,</li>
<li>impose policy or exogenous shocks,</li>
<li>visualize diverse dynamic macroeconomic scenarios, and</li>
<li>study the implications of various macroeconomic structures on key variables.</li>
</ul>
<p>The package offers the flexibility to support both theoretical frameworks and data-driven scenarios.</p>
<p>It is named in honor of Wynne Godley (1926‚Äì2010), a prominent British post-Keynesian economist and a leading figure in SFC modeling.</p>
<div class="section level3">
<h3 id="installation-Ô∏è">Installation ‚öôÔ∏è<a class="anchor" aria-label="anchor" href="#installation-%EF%B8%8F"></a>
</h3>
<p><code>godley</code> is currently hosted on GitHub <a href="https://github.com/gamrot/godley" class="external-link">github.com/gamrot/godley</a>. To install the development version directly, please use <code>devtools</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"gamrot/godley"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-">Example üìä<a class="anchor" aria-label="anchor" href="#example-"></a>
</h3>
<p>The following demonstrates a basic example of using the package to simulate a baseline scenario in the classic SIM model (Godley &amp; Lavoie, <em>Monetary Economics</em>, 2007).</p>
<p>To define the model structure, start by creating an empty model with the <code><a href="reference/create_model.html">create_model()</a></code> function.<br>
The resulting model is an S3 object (a list) of the SFC class.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_model.html">create_model</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"SFC SIM"</span><span class="op">)</span></span></code></pre></div>
<p>Use the <code><a href="reference/add_variable.html">add_variable()</a></code> function to include variables in the model. This function creates a <code>$variables</code> tibble within the model.</p>
<p>‚ö†Ô∏è <strong>Remarks:</strong></p>
<ul>
<li>The following characters are not permitted in variable names: <code>¬ß</code>, <code>¬£</code>, <code>@</code>, <code>#</code>, <code>$</code>, <code>{</code>, <code>}</code>, <code>;</code>, <code>:</code>, <code>'</code>, <code>\</code>, <code>~</code>, <code>`</code>, <code>?</code>, <code>!</code>, <code>%</code>, <code>^</code>, <code>&amp;</code>, <code>*</code>, <code>(</code>, <code>)</code>, <code>-</code>, <code>+</code>, <code>=</code>, <code>[</code>, <code>]</code>, <code>|</code>, <code>&lt;</code>, <code>,</code>, <code>&gt;</code>, <code>/</code>.<br>
</li>
<li>For best practices, use only letters, numbers, and underscores (<code>_</code>) when naming variables.<br>
</li>
<li>Each variable can be initialized with either a single scalar (representing a theoretical starting point) or a full vector of real data.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_sim</span> <span class="op">&lt;-</span> <span class="va">model_sim</span> <span class="op">|&gt;</span></span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"C_d"</span>, desc <span class="op">=</span> <span class="st">"Consumption demand by households"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"C_s"</span>, desc <span class="op">=</span> <span class="st">"Consumption supply"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G_s"</span>, desc <span class="op">=</span> <span class="st">"Government supply"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_h"</span>, desc <span class="op">=</span> <span class="st">"Cash money held by households"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"H_s"</span>, desc <span class="op">=</span> <span class="st">"Cash money supplied by the government"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"N_d"</span>, desc <span class="op">=</span> <span class="st">"Demand for labor"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"N_s"</span>, desc <span class="op">=</span> <span class="st">"Supply of labor"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"T_d"</span>, desc <span class="op">=</span> <span class="st">"Taxes, demand"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"T_s"</span>, desc <span class="op">=</span> <span class="st">"Taxes, supply"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Y"</span>, desc <span class="op">=</span> <span class="st">"Income = GDP"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Yd"</span>, desc <span class="op">=</span> <span class="st">"Disposable income of households"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha1"</span>, init <span class="op">=</span> <span class="fl">0.6</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of income"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha2"</span>, init <span class="op">=</span> <span class="fl">0.4</span>, desc <span class="op">=</span> <span class="st">"Propensity to consume out of wealth"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"theta"</span>, init <span class="op">=</span> <span class="fl">0.2</span>, desc <span class="op">=</span> <span class="st">"Tax rate"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G_d"</span>, init <span class="op">=</span> <span class="fl">20</span>, desc <span class="op">=</span> <span class="st">"Government demand"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span> <span class="fu"><a href="reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"W"</span>, init <span class="op">=</span> <span class="fl">1</span>, desc <span class="op">=</span> <span class="st">"Wage rate"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_sim</span><span class="op">$</span><span class="va">variables</span></span>
<span></span>
<span><span class="co">## # A tibble: 16 √ó 3</span></span>
<span><span class="co">##    name   init      desc</span></span>
<span><span class="co">##    &lt;chr&gt;  &lt;list&gt;    &lt;chr&gt;</span></span>
<span><span class="co">##  1 C_d    0         Consumption demand by households</span></span>
<span><span class="co">##  2 C_s    0         Consumption supply</span></span>
<span><span class="co">##  3 G_s    0         Government supply</span></span>
<span><span class="co">##  4 H_h    0         Cash money held by households</span></span>
<span><span class="co">##  5 H_s    0         Cash money supplied by the government</span></span>
<span><span class="co">##  6 N_d    0         Demand for labor</span></span>
<span><span class="co">##  7 N_s    0         Supply of labor</span></span>
<span><span class="co">##  8 T_d    0         Taxes, demand</span></span>
<span><span class="co">##  9 T_s    0         Taxes, supply</span></span>
<span><span class="co">## 10 Y      0         Income = GDP</span></span>
<span><span class="co">## 11 Yd     0         Disposable income of households</span></span>
<span><span class="co">## 12 alpha1 0.6       Propensity to consume out of income</span></span>
<span><span class="co">## 13 alpha2 0.4       Propensity to consume out of wealth</span></span>
<span><span class="co">## 14 theta  0.2       Tax rate</span></span>
<span><span class="co">## 15 G_d    20        Government demand</span></span>
<span><span class="co">## 16 W      1         Wage rate</span></span></code></pre></div>
<p>Then, specify the system of equations that governs the model. This can be done using the <code><a href="reference/add_equation.html">add_equation()</a></code> function by providing the equations in text form. The model will then include a <code>$equations</code> tibble.</p>
<p>Equations must adhere to the following rules:</p>
<ol style="list-style-type: decimal">
<li>The following characters are <strong>not allowed</strong>: <code>¬ß</code>, <code>¬£</code>, <code>@</code>, <code>#</code>, <code>$</code>, <code>{</code>, <code>}</code>, <code>;</code>, <code>:</code>, <code>'</code>, <code>\</code>, <code>~</code>, <code>`</code>.<br>
</li>
<li>Some characters are <strong>acceptable but treated as operators</strong> (ignored when reading variable names): <code>!</code>, <code>%</code>, <code>^</code>, <code>&amp;</code>, <code>*</code>, <code>(</code>, <code>)</code>, <code>-</code>, <code>+</code>, <code>=</code>, <code>[</code>, <code>]</code>, <code>|</code>, <code>&lt;</code>, <code>,</code>, <code>&gt;</code>, <code>/</code>.<br>
</li>
<li>The left-hand side must contain a variable that the equation defines, written in its untransformed form. For example, <code>C_s</code> for consumption. Constructs like <code>C_s*2</code> or <code>log(C_s)</code> are not allowed on the left-hand side. If an operator or function appears on the left, the entire expression will be treated as the variable name.</li>
<li>An equals sign <code>=</code> must separate the left-hand side from the right-hand side.</li>
<li>The right-hand side should contain the rest of the equation, written using variable names, standard operators, and functions available in R. For convenience, the package also includes commonly used operations on matrix columns, such as lags and differences:
<ul>
<li>
<strong>Lags</strong>: Add a negative lag order in square brackets to a variable. For example, the first lag of consumption is written as <code>C_s[-1]</code>, and the third lag as <code>C_s[-3]</code>. The package supports lags up to the fourth order, which is particularly useful for quarterly data. This syntax mirrors the behavior of the <code><a href="https://rdrr.io/r/stats/lag.html" class="external-link">lag()</a></code> function in R.</li>
<li>
<strong>First differences</strong>: The first difference, e.g., <code>C_s - C_s[-1]</code>, can be written as <code>d(C_s)</code>. This is equivalent to the <code><a href="https://rdrr.io/r/base/diff.html" class="external-link">diff()</a></code> function in R. Note that this operation is defined only for the first difference; higher-order differences, such as the third difference, must be expressed explicitly, e.g., <code>C_s - C_s[-3]</code>.</li>
<li>
<strong>Lagged differences</strong>: Combine the above two operations, e.g., <code>d(C_s[-1])</code>.</li>
</ul>
</li>
<li>Each variable being defined can appear on the left-hand side of a single equation. It is not allowed to have multiple different equations for the same variable (exact duplicates are flagged with an appropriate message).</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_sim</span> <span class="op">&lt;-</span> <span class="va">model_sim</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"C_s = C_d"</span>, desc <span class="op">=</span> <span class="st">"Consumption"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"G_s = G_d"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"T_s = T_d"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"N_s = N_d"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Yd = W * N_s - T_s"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"T_d = theta * W * N_s"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"C_d = alpha1 * Yd + alpha2 * H_h[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_s = G_d - T_d + H_s[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_h = Yd - C_d + H_h[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Y = C_s + G_s"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"N_d = Y/W"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"H_s = H_h"</span>, desc <span class="op">=</span> <span class="st">"Money equilibrium"</span>, hidden <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_sim</span><span class="op">$</span><span class="va">equations</span></span>
<span></span>
<span><span class="co">## # A tibble: 12 √ó 3</span></span>
<span><span class="co">##    equation                             hidden desc               </span></span>
<span><span class="co">##    &lt;chr&gt;                                &lt;lgl&gt;  &lt;chr&gt;              </span></span>
<span><span class="co">##  1 C_s = C_d                            FALSE  "Consumption"      </span></span>
<span><span class="co">##  2 G_s = G_d                            FALSE  ""                 </span></span>
<span><span class="co">##  3 T_s = T_d                            FALSE  ""                 </span></span>
<span><span class="co">##  4 N_s = N_d                            FALSE  ""                 </span></span>
<span><span class="co">##  5 Yd = W * N_s - T_s                   FALSE  ""                 </span></span>
<span><span class="co">##  6 T_d = theta * W * N_s                FALSE  ""                 </span></span>
<span><span class="co">##  7 C_d = alpha1 * Yd + alpha2 * H_h[-1] FALSE  ""                 </span></span>
<span><span class="co">##  8 H_s = G_d - T_d + H_s[-1]            FALSE  ""                 </span></span>
<span><span class="co">##  9 H_h = Yd - C_d + H_h[-1]             FALSE  ""                 </span></span>
<span><span class="co">## 10 Y = C_s + G_s                        FALSE  ""                 </span></span>
<span><span class="co">## 11 N_d = Y/W                            FALSE  ""                 </span></span>
<span><span class="co">## 12 H_s = H_h                            TRUE   "Money equilibrium"</span></span></code></pre></div>
<p>With all variables and equations defined, the model is ready to be solved over a given time horizon. This can be done using the <code><a href="reference/simulate_scenario.html">simulate_scenario()</a></code> function. The function starts by validating the user-defined model through the <code><a href="reference/prepare.html">prepare()</a></code> function, which is also accessible in the package‚Äôs exported environment.</p>
<p>The function allows choosing a simulation method (<code>Newton</code> or <code>Gauss</code>), selecting the number of periods and a starting date. Specifying an initial period is optional; if omitted, periods will simply be numbered consecutively with natural numbers.</p>
<p>By default, equations are solved using the Gauss method. Independent equations for a specific period are resolved in a single iteration. Interdependent equations are grouped into loops and solved iteratively. For the first period, the method uses the provided initial values (<code>init</code>). In subsequent iterations, it relies on the results of the previous iteration for all variables. The process continues until the solution converges within the specified tolerance (<code>tol</code>) or the maximum number of iterations (<code>max_iter</code>) is reached. If any period produces a value of <code>Inf</code>, <code>NaN</code>, or <code>NA</code>, the process is stopped, and an error message is displayed.</p>
<p>Before solving equations, their order is determined to:</p>
<ol style="list-style-type: decimal">
<li>Solve endogenous variables first, allowing them to be used as exogenous variables later.<br>
</li>
<li>Group interdependent equations into loops, ensuring proper substitution of exogenous variables.</li>
</ol>
<p>The Newton method works similarly but uses the Newton-Raphson algorithm to solve interdependent equations. This algorithm is implemented via the <code><a href="https://rdrr.io/pkg/rootSolve/man/multiroot.html" class="external-link">rootSolve::multiroot()</a></code> function.</p>
<p>During the model-building phase, setting the <code>info = TRUE</code> argument can be helpful. This returns the result of the <code><a href="reference/prepare.html">prepare()</a></code> function, providing details on the classification of all variables (endogenous/exogenous) and other summary information about the input data.</p>
<p>Simulation results are saved in a <code>$result</code> tibble linked to the scenario being simulated (e.g., the baseline scenario is stored as <code>$baseline</code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_sim</span> <span class="op">&lt;-</span> <span class="va">model_sim</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span></span>
<span>    periods <span class="op">=</span> <span class="fl">100</span>, start_date <span class="op">=</span> <span class="st">"2015-01-01"</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"Gauss"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, tol <span class="op">=</span> <span class="fl">1e-05</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">model_sim</span><span class="op">$</span><span class="va">baseline</span><span class="op">$</span><span class="va">result</span></span>
<span></span>
<span><span class="co">## # A tibble: 100 √ó 17</span></span>
<span><span class="co">##    time         C_s   G_s   T_s   N_s    Yd   T_d   C_d   H_s   H_h     Y   N_d</span></span>
<span><span class="co">##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">##  1 2015-01-01   0       0  0      0     0    0      0     0     0     0     0  </span></span>
<span><span class="co">##  2 2015-04-01  18.5    20  7.69  38.5  30.8  7.69  18.5  12.3  12.3  38.5  38.5</span></span>
<span><span class="co">##  3 2015-07-01  27.9    20  9.59  47.9  38.3  9.59  27.9  22.7  22.7  47.9  47.9</span></span>
<span><span class="co">##  4 2015-10-01  35.9    20 11.2   55.9  44.8 11.2   35.9  31.5  31.5  55.9  55.9</span></span>
<span><span class="co">##  5 2016-01-01  42.7    20 12.5   62.7  50.2 12.5   42.7  39.0  39.0  62.7  62.7</span></span>
<span><span class="co">##  6 2016-04-01  48.5    20 13.7   68.5  54.8 13.7   48.5  45.3  45.3  68.5  68.5</span></span>
<span><span class="co">##  7 2016-07-01  53.3    20 14.7   73.3  58.6 14.7   53.3  50.6  50.6  73.3  73.3</span></span>
<span><span class="co">##  8 2016-10-01  57.4    20 15.5   77.4  61.9 15.5   57.4  55.2  55.2  77.4  77.4</span></span>
<span><span class="co">##  9 2017-01-01  60.9    20 16.2   80.9  64.7 16.2   60.9  59.0  59.0  80.9  80.9</span></span>
<span><span class="co">## 10 2017-04-01  63.8    20 16.8   83.8  67.1 16.8   63.8  62.2  62.2  83.8  83.8</span></span>
<span><span class="co">## # ‚Ä¶ with 90 more rows, and 5 more variables: alpha1 &lt;dbl&gt;, alpha2 &lt;dbl&gt;,</span></span>
<span><span class="co">## #   theta &lt;dbl&gt;, G_d &lt;dbl&gt;, W &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualizations-">Visualizations üé®<a class="anchor" aria-label="anchor" href="#visualizations-"></a>
</h3>
<p>The <strong>godley</strong> package provides customized visualization capabilities to enhance the analysis of simulation outcomes.</p>
<p>Users can leverage the <code><a href="reference/plot_simulation.html">plot_simulation()</a></code> function to create plots, by specifying the time range with <code>from</code> and <code>to</code>, along with a list of <code>expressions</code>. These expressions can include variable names or calculations derived from them, such as <code>G_s/Y</code>. In the example below, the plot displays the expressions for Income, Government Spending, and Taxes.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span></span>
<span>  <span class="va">model_sim</span>, scenario <span class="op">=</span> <span class="st">"baseline"</span>,</span>
<span>  from <span class="op">=</span> <span class="st">"2015-01-01"</span>, to <span class="op">=</span> <span class="st">"2023-01-01"</span>,</span>
<span>  expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"G_s"</span>, <span class="st">"T_s"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="reference/figures/images/Scenario_baseline.png" alt="Plot of simulation results: baseline scenario"><div class="figcaption">Plot of simulation results: baseline scenario</div>
</div>
<p>Beyond plotting variables over time, the <code><a href="reference/plot_cycles.html">plot_cycles()</a></code> function provides a way to visualize the model‚Äôs structure and uncover loops (feedback mechanisms and endogeneity) within the interdependencies between variables, offering an intuitive approach for interpreting and communicating the results of macroeconomic simulations.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_cycles.html">plot_cycles</a></span><span class="op">(</span><span class="va">model_sim</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="reference/figures/images/Cycles.png" alt="Variables interdependencies"><div class="figcaption">Variables interdependencies</div>
</div>
</div>
<div class="section level3">
<h3 id="templates-">Templates üìù<a class="anchor" aria-label="anchor" href="#templates-"></a>
</h3>
<p>To streamline model creation, <strong>godley</strong> comes with predefined templates. Rather than starting with an empty model and manually adding equations each time, users can reuse a previously created model or choose from the classic SFC models (Godley &amp; Lavoie, 2007) included in the package. These templates are available through the <code>template</code> argument in the <code><a href="reference/create_model.html">create_model()</a></code> function. The available templates include <code>SIM</code>, <code>SIMEX</code>, <code>PC</code>, <code>PCEX</code>, <code>LP</code>, <code>REG</code>, <code>OPEN</code>, <code>BMW</code>, <code>BMWK</code>, <code>DIS</code>, and <code>DISINF</code>, covering all models presented in Godley &amp; Lavoie (2007).</p>
</div>
<div class="section level3">
<h3 id="shocks-">Shocks ‚ö°<a class="anchor" aria-label="anchor" href="#shocks-"></a>
</h3>
<p>The package allows users to introduce and simulate shocks within the model.</p>
<p>An alternative shock scenario is defined by:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Shock parameters</strong> (which variable is affected, when it occurs, and what value it takes),<br>
</li>
<li>
<strong>Simulation</strong> (how many future periods the new scenario should cover).</li>
</ol>
<p>To create a shock, begin by initializing an empty S3 object (list) of the <code>SFC_shock</code> class using the <code><a href="reference/create_shock.html">create_shock()</a></code> function. Next, add the shock parameters for selected variables (<code>variable</code>) using the <code><a href="reference/add_shock.html">add_shock()</a></code> function. Shock values can be defined explicitly (<code>value</code>), as a relative rate (<code>rate</code>), or as an absolute increment (<code>absolute</code>).</p>
<p>For example, a 20% increase in government spending can be simulated by first creating a shock object using <code><a href="reference/create_shock.html">create_shock()</a></code> and then applying it with <code><a href="reference/add_shock.html">add_shock()</a></code> for the period between Q1 2017 and Q4 2020.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_shock</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_shock.html">create_shock</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_shock.html">add_shock</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"G_d"</span>, rate <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>    start <span class="op">=</span> <span class="st">"2017-01-01"</span>, end <span class="op">=</span> <span class="st">"2020-10-01"</span>,</span>
<span>    desc <span class="op">=</span> <span class="st">"permanent increase in government expenditures"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Once the shock has been defined, it can be incorporated into a new scenario using <code><a href="reference/add_scenario.html">add_scenario()</a></code>. The baseline scenario and corresponding time periods must first be specified. After establishing the shock scenario, the <code><a href="reference/simulate_scenario.html">simulate_scenario()</a></code> function can be executed again to generate the updated results.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_sim</span> <span class="op">&lt;-</span> <span class="va">model_sim</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_scenario.html">add_scenario</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="st">"expansion"</span>, origin <span class="op">=</span> <span class="st">"baseline"</span>,</span>
<span>    origin_start <span class="op">=</span> <span class="st">"2015-01-01"</span>, origin_end <span class="op">=</span> <span class="st">"2023-10-01"</span>,</span>
<span>    shock <span class="op">=</span> <span class="va">sim_shock</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span>periods <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_sim</span><span class="op">$</span><span class="va">expansion</span><span class="op">$</span><span class="va">result</span></span>
<span></span>
<span><span class="co">## # A tibble: 100 √ó 17</span></span>
<span><span class="co">##    time         C_s   G_s   T_s   N_s    Yd   T_d   C_d   H_s   H_h     Y   N_d</span></span>
<span><span class="co">##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">##  1 2015-01-01   0       0  0      0     0    0      0     0     0     0     0  </span></span>
<span><span class="co">##  2 2015-04-01  18.5    20  7.69  38.5  30.8  7.69  18.5  12.3  12.3  38.5  38.5</span></span>
<span><span class="co">##  3 2015-07-01  27.9    20  9.59  47.9  38.3  9.59  27.9  22.7  22.7  47.9  47.9</span></span>
<span><span class="co">##  4 2015-10-01  35.9    20 11.2   55.9  44.8 11.2   35.9  31.5  31.5  55.9  55.9</span></span>
<span><span class="co">##  5 2016-01-01  42.7    20 12.5   62.7  50.2 12.5   42.7  39.0  39.0  62.7  62.7</span></span>
<span><span class="co">##  6 2016-04-01  48.5    20 13.7   68.5  54.8 13.7   48.5  45.3  45.3  68.5  68.5</span></span>
<span><span class="co">##  7 2016-07-01  53.3    20 14.7   73.3  58.6 14.7   53.3  50.6  50.6  73.3  73.3</span></span>
<span><span class="co">##  8 2016-10-01  57.4    20 15.5   77.4  61.9 15.5   57.4  55.2  55.2  77.4  77.4</span></span>
<span><span class="co">##  9 2017-01-01  64.6    24 17.7   88.6  70.9 17.7   64.6  61.4  61.4  88.6  88.6</span></span>
<span><span class="co">## 10 2017-04-01  69.4    24 18.7   93.4  74.7 18.7   69.4  66.8  66.8  93.4  93.4</span></span>
<span><span class="co">## # ‚Ä¶ with 90 more rows, and 5 more variables: alpha1 &lt;dbl&gt;, alpha2 &lt;dbl&gt;,</span></span>
<span><span class="co">## #   theta &lt;dbl&gt;, G_d &lt;dbl&gt;, W &lt;dbl&gt;</span></span></code></pre></div>
<p>The results indicate that increased government expenditures have a positive effect on income, but a less favorable short-term impact on the government balance. This outcome can be visualized as follows:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span></span>
<span>  <span class="va">model_sim</span>, scenario <span class="op">=</span> <span class="st">"expansion"</span>,</span>
<span>  to <span class="op">=</span> <span class="st">"2025-01-01"</span>, expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"G_s"</span>, <span class="st">"T_s"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="reference/figures/images/Scenario_expansion.png" alt="Plot of simulation results: shock scenario"><div class="figcaption">Plot of simulation results: shock scenario</div>
</div>
</div>
<div class="section level3">
<h3 id="sensitivity-">Sensitivity üßô<a class="anchor" aria-label="anchor" href="#sensitivity-"></a>
</h3>
<p>The <strong>godley</strong> package allows for the assessment of simulation result sensitivity to specific parameter values. For example, the effect of small adjustments to <code>alpha1</code> on short-term dynamics can be analyzed by first creating a new model object with <code><a href="reference/create_sensitivity.html">create_sensitivity()</a></code> and specifying the upper and lower bounds for the parameter of interest.</p>
<p>The <code><a href="reference/create_sensitivity.html">create_sensitivity()</a></code> function generates a new SFC object based on an existing model and automatically adds multiple scenarios. These scenarios differ only in the value of the selected parameter (<code>variable</code>), which is varied across a specified range defined by <code>lower</code>, <code>upper</code>, and <code>step</code>.</p>
<p>Once the sensitivity scenarios are generated, the simulations can be executed:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_sens</span> <span class="op">&lt;-</span> <span class="va">model_sim</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/create_sensitivity.html">create_sensitivity</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"alpha1"</span>, lower <span class="op">=</span> <span class="fl">0.1</span>, upper <span class="op">=</span> <span class="fl">0.8</span>, step <span class="op">=</span> <span class="fl">0.1</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span>periods <span class="op">=</span> <span class="fl">100</span>, start_date <span class="op">=</span> <span class="st">"2015-01-01"</span><span class="op">)</span></span></code></pre></div>
<p>The results can be displayed in a plot. To visualize multiple scenarios that share the same <code>scenario</code> substring in their names, set the <code>take_all = TRUE</code> argument.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span></span>
<span>  <span class="va">model_sens</span>, scenario <span class="op">=</span> <span class="st">"sensitivity"</span>, take_all <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  to <span class="op">=</span> <span class="st">"2028-01-01"</span>, expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="reference/figures/images/Sensitivity.png" alt="Sensitivity analysis"><div class="figcaption">Sensitivity analysis</div>
</div>
</div>
<div class="section level3">
<h3 id="additional-examples-">Additional examples ‚≠ê<a class="anchor" aria-label="anchor" href="#additional-examples-"></a>
</h3>
<p>More examples and detailed information about <strong>godley</strong> functions and model setups are available at the <a href="https://gamrot.github.io/godley/">package website</a>.</p>
</div>
<div class="section level3">
<h3 id="key-functions-">Key Functions üîß<a class="anchor" aria-label="anchor" href="#key-functions-"></a>
</h3>
<ul>
<li>
<code><a href="reference/create_model.html">create_model()</a></code>: Create an SFC model.</li>
<li>
<code><a href="reference/add_variable.html">add_variable()</a></code>: Add variables to the model.</li>
<li>
<code><a href="reference/add_equation.html">add_equation()</a></code>: Add equations to the model.</li>
<li>
<code><a href="reference/simulate_scenario.html">simulate_scenario()</a></code>: Simulate one or more scenarios.</li>
<li>
<code><a href="reference/plot_simulation.html">plot_simulation()</a></code>: Plot simulation results.</li>
<li>
<code><a href="reference/plot_cycles.html">plot_cycles()</a></code>: Visualize model structure and feedback loops.</li>
<li>
<code><a href="reference/create_shock.html">create_shock()</a></code>: Create a shock object.</li>
<li>
<code><a href="reference/add_shock.html">add_shock()</a></code>: Add shock parameters.</li>
<li>
<code><a href="reference/add_scenario.html">add_scenario()</a></code>: Add a new scenario to an existing model.</li>
<li>
<code><a href="reference/create_sensitivity.html">create_sensitivity()</a></code>: Generate sensitivity scenarios for selected parameters.</li>
</ul>
</div>
<div class="section level3">
<h3 id="similar-work-">Similar work üë™<a class="anchor" aria-label="anchor" href="#similar-work-"></a>
</h3>
<p>The following packages also provide approaches to stock-flow consistent modeling:</p>
<ul>
<li>
<a href="https://github.com/joaomacalos/sfcr" class="external-link">sfcr</a>: An alternative framework for SFC modeling.</li>
<li>
<a href="https://github.com/andrea-luciani/bimets" class="external-link">bimets</a>: Offers time series and econometric tools for empirical models.</li>
<li>
<a href="https://github.com/gpetrini/pysolve3" class="external-link">pysolve3</a>: A Python-based solver for SFC models.</li>
</ul>
</div>
<div class="section level3">
<h3 id="getting-help-">Getting help üêõ<a class="anchor" aria-label="anchor" href="#getting-help-"></a>
</h3>
<p>If any issues arise or bugs are encountered, please file a report with a minimal reproducible example at <a href="https://github.com/gamrot/godley/issues" class="external-link">https://github.com/gamrot/godley/issues</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/gamrot/godley/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/gamrot/godley/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">

</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
