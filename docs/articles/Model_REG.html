<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Model REG • godley</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Model REG">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">godley</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/package_outline.html">Package Outline</a></li>
    <li><a class="dropdown-item" href="../articles/Model_SIM.html">Model SIM</a></li>
    <li><a class="dropdown-item" href="../articles/Model_SIMEX.html">Model SIMEX</a></li>
    <li><a class="dropdown-item" href="../articles/Model_PC.html">Model PC</a></li>
    <li><a class="dropdown-item" href="../articles/Model_LP.html">Model LP</a></li>
    <li><a class="dropdown-item" href="../articles/Model_REG.html">Model REG</a></li>
    <li><a class="dropdown-item" href="../articles/Model_OPEN.html">Model OPEN</a></li>
    <li><a class="dropdown-item" href="../articles/Model_BMW.html">Model BMW</a></li>
    <li><a class="dropdown-item" href="../articles/Model_BMWK.html">Model BMWK</a></li>
    <li><a class="dropdown-item" href="../articles/Model_DIS.html">Model DIS</a></li>
    <li><a class="dropdown-item" href="../articles/Model_DISINF.html">Model DISINF</a></li>
    <li><a class="dropdown-item" href="../articles/Model_PCEX.html">Model PCEX</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gamrot/godley" aria-label="GitHub repository"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="Model_REG_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="Model_REG_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="Model_REG_files/plotly-binding-4.10.4/plotly.js"></script><script src="Model_REG_files/typedarray-0.1/typedarray.min.js"></script><link href="Model_REG_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="Model_REG_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="Model_REG_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="Model_REG_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Model REG</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gamrot/godley/blob/HEAD/vignettes/Model_REG.Rmd" class="external-link"><code>vignettes/Model_REG.Rmd</code></a></small>
      <div class="d-none name"><code>Model_REG.Rmd</code></div>
    </div>

    
    
<p>This guide explains how to use the <code>godley</code> package to
create the REG model — a model with two-region economy, as described by
<em>Wynne Godley</em> and <em>Marc Lavoie</em> in Chapter 6 of
<em>Monetary Economics. An Integrated Approach to Credit, Money, Income,
Production and Wealth.</em></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gamrot.github.io/godley/">godley</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="base-scenario">Base scenario<a class="anchor" aria-label="anchor" href="#base-scenario"></a>
</h3>
<p>Start by creating an empty SFC model:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty model</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_model.html">create_model</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"SFC REG"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Empty model created</span></span></code></pre></div>
<p>Define the variables for the model:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add variables</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="va">model_reg</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"r"</span>, init <span class="op">=</span> <span class="fl">0.025</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G_S"</span>, init <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G_N"</span>, init <span class="op">=</span> <span class="fl">20</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"mu_N"</span>, init <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"mu_S"</span>, init <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha1_N"</span>, init <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha1_S"</span>, init <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha2_N"</span>, init <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"alpha2_S"</span>, init <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda0_N"</span>, init <span class="op">=</span> <span class="fl">0.67</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda0_S"</span>, init <span class="op">=</span> <span class="fl">0.67</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda1_N"</span>, init <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda1_S"</span>, init <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda2_N"</span>, init <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"lambda2_S"</span>, init <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"theta"</span>, init <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Y_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"C_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"X_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"IM_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Y_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"C_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"X_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"IM_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"YD_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"TX_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Bh_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"YD_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"TX_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Bh_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"V_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Hh_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Hh_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"TX"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"G"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Bh"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Bs"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Hh"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Hs"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variable.html">add_variable</a></span><span class="op">(</span><span class="st">"Bcb"</span><span class="op">)</span></span></code></pre></div>
<p>Establish the relationships between variables by adding
equations:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add equations</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="va">model_reg</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Y_N = C_N + G_N + X_N - IM_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Y_S = C_S + G_S + X_S - IM_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"IM_N = mu_N * Y_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"IM_S = mu_S * Y_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"X_N = IM_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"YD_N = Y_N - TX_N + r[-1] * Bh_N[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"YD_S = Y_S - TX_S + r[-1] * Bh_S[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"TX_N = theta * ( Y_N + r[-1] * Bh_N[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"X_S = IM_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"TX_S = theta * ( Y_S + r[-1] * Bh_S[-1])"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V_N = V_N[-1] + ( YD_N - C_N )"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"V_S = V_S[-1] + ( YD_S - C_S )"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"C_N = alpha1_N * YD_N + alpha2_N * V_N[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"C_S = alpha1_S * YD_S + alpha2_S * V_S[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Hh_N = V_N - Bh_N"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Hh_S = V_S - Bh_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Bh_N = V_N * ( lambda0_N + lambda1_N * r - lambda2_N * ( YD_N/V_N ) )"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Bh_S = V_S * ( lambda0_S + lambda1_S * r - lambda2_S * ( YD_S/V_S ) )"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"TX = TX_N + TX_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"G = G_N + G_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Bh = Bh_N + Bh_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Hh = Hh_N + Hh_S"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Bs = Bs[-1] + ( G + r[-1] * Bs[-1] ) - ( TX + r[-1] * Bcb[-1] )"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Hs = Hs[-1] + Bcb - Bcb[-1]"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Bcb = Bs - Bh"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_equation.html">add_equation</a></span><span class="op">(</span><span class="st">"Hs = Hh"</span>, desc <span class="op">=</span> <span class="st">"Money equilibrium"</span>, hidden <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Now, you can simulate the model (in this example, we calculate the
baseline scenario over 100 periods using the Gauss method)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate model</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_reg</span>,</span>
<span>  scenario <span class="op">=</span> <span class="st">"baseline"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, periods <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Gauss"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Model prepared successfully</span></span>
<span><span class="co">#&gt; Simulating scenario baseline (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>With the simulation estimated, visualize the results for the
variables of interest:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot results</span></span>
<span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">model_reg</span>, scenario <span class="op">=</span> <span class="st">"baseline"</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"deltaV_S = V_S - dplyr::lag(V_S)"</span>,</span>
<span>    <span class="st">"GB_S = TX_S - (G_S + dplyr::lag(r) * dplyr::lag(Bh_S))"</span>,</span>
<span>    <span class="st">"TB_S = X_S - IM_S"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:100%;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"visdat":{"1507e62b093fb":["function () ","plotlyVisDat"]},"cur_data":"1507e62b093fb","attrs":{"1507e62b093fb":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,10.909089643992143,9.5163831301447459,8.3049472992681928,7.247726016478552,6.3250892567397656,5.5199042652896608,4.8172194669993829,4.2039865689627334,3.668818328309996,3.2017771002214346,2.794190303836757,2.4384893793872777,2.1280692461138386,1.8571656512170307,1.6207481323076536,1.4144266057566597,1.2343698463645865,1.077234344583772,0.94010222022882317,0.82042703978272868,0.71598653116977573,0.62484131794619202,0.54529890663565084,0.47588225848349452,0.41530236203217896,0.36243429721281473,0.31629634648206206,0.27603176511506433,0.240892872143462,0.21022716651951612,0.18346521069543087,0.16011005662481637,0.13972801783637578,0.12194061622395225,0.10641755401188391,0.092870580390325586,0.081048138928977664,0.070730696375989055,0.061726666101691308,0.053868850488555609,0.047011336205613929,0.041026784714986775,0.035804067697370101,0.031246203488365154,0.027268556206749395,0.023797264134131524,0.020767868161954084,0.018124114837817729,0.015816911783758769],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: deltaV_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e62b093fb.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,-10.909089731051077,-9.516383254873535,-8.3049474568854205,-7.2477262027975211,-6.3250893339504461,-5.5199043509144499,-4.8172195599671834,-4.2039866683387643,-3.6688184332784886,-3.201777210070464,-2.7941904179450354,-2.438489497212597,-2.1280693671830484,-1.8571657751171458,-1.6207482586783115,-1.4144267342833494,-1.2343699767728609,-1.0772344766341106,-0.94010235371215956,-0.82042717451665226,-0.71598666699510716,-0.62484145472398822,-0.5452990442446648,-0.47588239681790512,-0.41530250099965471,-0.36243443673274811,-0.31629648648411646,-0.27603190553790569,-0.24089301293347987,-0.21022730762999231,-0.18346535208556602,-0.1601101982590265,-0.13972815968356755,-0.12194075825701844,-0.10641769620717056,-0.092870722727184329,-0.081048281389364263,-0.070730838944196961,-0.061726808763992835,-0.053868993232971008,-0.047011479021694669,-0.041026927593595275,-0.035804210630555389,-0.031246346469174568,-0.027268699229143323,-0.023797407192777342,-0.020768011252283003,-0.018124257955765444,-0.015817054925815199],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: GB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e62b093fb.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: TB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":70,"l":60,"t":60,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"time"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92000000000000004},"title":{"text":"Scenario baseline","y":0.94999999999999996,"x":0.5,"xanchor":"center","yanchor":"top"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[10.909089643992143,9.5163831301447459,8.3049472992681928,7.247726016478552,6.3250892567397656,5.5199042652896608,4.8172194669993829,4.2039865689627334,3.668818328309996,3.2017771002214346,2.794190303836757,2.4384893793872777,2.1280692461138386,1.8571656512170307,1.6207481323076536,1.4144266057566597,1.2343698463645865,1.077234344583772,0.94010222022882317,0.82042703978272868,0.71598653116977573,0.62484131794619202,0.54529890663565084,0.47588225848349452,0.41530236203217896,0.36243429721281473,0.31629634648206206,0.27603176511506433,0.240892872143462,0.21022716651951612,0.18346521069543087,0.16011005662481637,0.13972801783637578,0.12194061622395225,0.10641755401188391,0.092870580390325586,0.081048138928977664,0.070730696375989055,0.061726666101691308,0.053868850488555609,0.047011336205613929,0.041026784714986775,0.035804067697370101,0.031246203488365154,0.027268556206749395,0.023797264134131524,0.020767868161954084,0.018124114837817729,0.015816911783758769],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: deltaV_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[-10.909089731051077,-9.516383254873535,-8.3049474568854205,-7.2477262027975211,-6.3250893339504461,-5.5199043509144499,-4.8172195599671834,-4.2039866683387643,-3.6688184332784886,-3.201777210070464,-2.7941904179450354,-2.438489497212597,-2.1280693671830484,-1.8571657751171458,-1.6207482586783115,-1.4144267342833494,-1.2343699767728609,-1.0772344766341106,-0.94010235371215956,-0.82042717451665226,-0.71598666699510716,-0.62484145472398822,-0.5452990442446648,-0.47588239681790512,-0.41530250099965471,-0.36243443673274811,-0.31629648648411646,-0.27603190553790569,-0.24089301293347987,-0.21022730762999231,-0.18346535208556602,-0.1601101982590265,-0.13972815968356755,-0.12194075825701844,-0.10641769620717056,-0.092870722727184329,-0.081048281389364263,-0.070730838944196961,-0.061726808763992835,-0.053868993232971008,-0.047011479021694669,-0.041026927593595275,-0.035804210630555389,-0.031246346469174568,-0.027268699229143323,-0.023797407192777342,-0.020768011252283003,-0.018124257955765444,-0.015817054925815199],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: GB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(255,127,14,1)","width":2},"marker":{"color":"rgba(255,127,14,1)","size":3,"line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"baseline: TB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(44,160,44,1)","width":2},"marker":{"color":"rgba(44,160,44,1)","size":3,"line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p><em>Note:</em> The above example uses the new pipe operator
(<code>|&gt;</code>), which requires R 4.1 or later.</p>
</div>
<div class="section level3">
<h3 id="shock-scenario">Shock scenario<a class="anchor" aria-label="anchor" href="#shock-scenario"></a>
</h3>
<p>With <code>godley</code> package you can simulate how shocks affect
the economy (specifically, how they impact the base scenario).</p>
<div class="section level4">
<h4 id="shock-1">Shock 1<a class="anchor" aria-label="anchor" href="#shock-1"></a>
</h4>
<p>In the first example, we propose to introduce an increase in the
propensity to import in the South.</p>
<p>First, initialize an empty shock object:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty shock</span></span>
<span><span class="va">shock_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_shock.html">create_shock</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Shock object created</span></span></code></pre></div>
<p>Then, define the shock by adding an appropriate equation:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add shock equation with increased propensity to import of the South</span></span>
<span><span class="va">shock_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_shock.html">add_shock</a></span><span class="op">(</span><span class="va">shock_reg</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"mu_S"</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"An increase in the propensity to import of the South"</span>,</span>
<span>  start <span class="op">=</span> <span class="fl">5</span>, end <span class="op">=</span> <span class="fl">60</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Integrate the shock into the model by creating a new scenario:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create new scenario with this shock</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_scenario.html">add_scenario</a></span><span class="op">(</span><span class="va">model_reg</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"expansion1"</span>, origin <span class="op">=</span> <span class="st">"baseline"</span>,</span>
<span>  origin_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  origin_end <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  shock <span class="op">=</span> <span class="va">shock_reg</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Simulate the scenario with the shock applied:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate shock</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_reg</span>,</span>
<span>  scenario <span class="op">=</span> <span class="st">"expansion1"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, periods <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Gauss"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Simulating scenario expansion1 (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Finally, plot the simulation outcomes:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">model_reg</span>, scenario <span class="op">=</span> <span class="st">"expansion1"</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"deltaV_S = V_S - dplyr::lag(V_S)"</span>,</span>
<span>    <span class="st">"GB_S = TX_S - (G_S + dplyr::lag(r) * dplyr::lag(Bh_S))"</span>,</span>
<span>    <span class="st">"TB_S = X_S - IM_S"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:100%;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"visdat":{"1507e591fe9ae":["function () ","plotlyVisDat"]},"cur_data":"1507e591fe9ae","attrs":{"1507e591fe9ae":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,10.909089678917976,9.5163831736381752,8.3049473476136626,5.372246303132556,4.6939652365749254,4.1004261590178146,3.5816136593445336,3.1281874380008148,2.7319605528553979,2.3857598714858099,2.0833029070593838,1.819089109316991,1.5883040246178837,1.3867348881158961,1.2106963522653444,1.0569651876946864,0.92272291441735632,0.80550543320678969,0.70315882889767067,0.61380060975491801,0.53578573038161892,0.46767682050679582,0.40821810903493372,0.35631259259353953,0.31100205111968648,0.27144956039046519,0.23692419340984827,0.20678763975428183,0.18048250485669826,0.15752208023553749,0.13748140126973851,0.11998943166803144,0.10472223362360467,0.091397000092655389,0.079766840967749886,0.069616228378407641,0.060757018165631393,0.053024974939191338,0.046276737210177998,0.040387167051619599,0.035247035712927755,0.030761002718790564,0.026845851328133108,0.023428947905657083,0.02044689684964851,0.017844366299755166,0.015573062976883989,0.013590837244862541,0.011860901874840124],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion1: deltaV_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e591fe9ae.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,-10.909089687282084,-9.5163831922353275,-8.3049473771419819,-8.8106258843188776,-8.1233192166713728,-7.5224365796758441,-6.9978051884631789,-6.5397681475450469,-6.1398877044993547,-5.7907919878387943,-5.4860410322933824,-5.2200095035899938,-4.9877840707403358,-4.7850736196805173,-4.6081307198895196,-4.453682948194686,-4.3188728440344342,-4.2012054204443565,-4.0985022871878911,-4.0088615587783458,-3.9306228224435849,-3.8623365309895661,-3.8027372644734605,-3.7507203738923565,-3.7053215808776407,-3.6656991606778888,-3.6311183824159912,-3.6009379215186073,-3.5745979950426658,-3.5516100019860737,-3.5315474781171794,-3.5140381988713294,-3.4987572848679918,-3.4854211829716739,-3.4737824118807943,-3.46362497526966,-3.4547603577810051,-3.4470240298914732,-3.4402723970445344,-3.434380136633262,-3.4292378735688125,-3.4247501514191754,-3.4208336615605965,-3.4174156975509575,-3.4144328060973592,-3.4118296096255349,-3.4095577786332854,-3.4075751347816592,-3.4058448680980362],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion1: GB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e591fe9ae.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,0,0,0,-3.4383795067641891,-3.4293538931525926,-3.4220103227932341,-3.4161914217375884,-3.4115805938697772,-3.4079270287409411,-3.4050319871487549,-3.4027379905364015,-3.4009202547858592,-3.399479902459035,-3.3983385842594096,-3.3974342171430187,-3.3967176072489629,-3.3961497739501745,-3.3956998294634673,-3.3953432986780498,-3.3950607878078607,-3.3948369294476848,-3.3946595466482457,-3.3945189905394884,-3.3944076154710174,-3.3943193631198767,-3.3942494329423845,-3.3941940210442354,-3.3941501132642173,-3.3941153212162547,-3.3940877523710675,-3.3940659071104662,-3.3940485971543133,-3.3940348809231722,-3.3940240123202443,-3.3940154001469764,-3.3940085759443264,-3.3940031685106042,-3.3939988837097559,-3.3939954884716457,-3.3939927981140343,-3.393990666296741,-3.3939889770613725,-3.3939876385237397,-3.393986577875765,-3.3939857374250693,-3.3939850714568252,-3.3939845437470311,-3.3939841255921515,-3.3939837942477666],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion1: TB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":70,"l":60,"t":60,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"time"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92000000000000004},"title":{"text":"Scenario expansion1","y":0.94999999999999996,"x":0.5,"xanchor":"center","yanchor":"top"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[10.909089678917976,9.5163831736381752,8.3049473476136626,5.372246303132556,4.6939652365749254,4.1004261590178146,3.5816136593445336,3.1281874380008148,2.7319605528553979,2.3857598714858099,2.0833029070593838,1.819089109316991,1.5883040246178837,1.3867348881158961,1.2106963522653444,1.0569651876946864,0.92272291441735632,0.80550543320678969,0.70315882889767067,0.61380060975491801,0.53578573038161892,0.46767682050679582,0.40821810903493372,0.35631259259353953,0.31100205111968648,0.27144956039046519,0.23692419340984827,0.20678763975428183,0.18048250485669826,0.15752208023553749,0.13748140126973851,0.11998943166803144,0.10472223362360467,0.091397000092655389,0.079766840967749886,0.069616228378407641,0.060757018165631393,0.053024974939191338,0.046276737210177998,0.040387167051619599,0.035247035712927755,0.030761002718790564,0.026845851328133108,0.023428947905657083,0.02044689684964851,0.017844366299755166,0.015573062976883989,0.013590837244862541,0.011860901874840124],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion1: deltaV_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[-10.909089687282084,-9.5163831922353275,-8.3049473771419819,-8.8106258843188776,-8.1233192166713728,-7.5224365796758441,-6.9978051884631789,-6.5397681475450469,-6.1398877044993547,-5.7907919878387943,-5.4860410322933824,-5.2200095035899938,-4.9877840707403358,-4.7850736196805173,-4.6081307198895196,-4.453682948194686,-4.3188728440344342,-4.2012054204443565,-4.0985022871878911,-4.0088615587783458,-3.9306228224435849,-3.8623365309895661,-3.8027372644734605,-3.7507203738923565,-3.7053215808776407,-3.6656991606778888,-3.6311183824159912,-3.6009379215186073,-3.5745979950426658,-3.5516100019860737,-3.5315474781171794,-3.5140381988713294,-3.4987572848679918,-3.4854211829716739,-3.4737824118807943,-3.46362497526966,-3.4547603577810051,-3.4470240298914732,-3.4402723970445344,-3.434380136633262,-3.4292378735688125,-3.4247501514191754,-3.4208336615605965,-3.4174156975509575,-3.4144328060973592,-3.4118296096255349,-3.4095577786332854,-3.4075751347816592,-3.4058448680980362],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion1: GB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(255,127,14,1)","width":2},"marker":{"color":"rgba(255,127,14,1)","size":3,"line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[0,0,0,0,-3.4383795067641891,-3.4293538931525926,-3.4220103227932341,-3.4161914217375884,-3.4115805938697772,-3.4079270287409411,-3.4050319871487549,-3.4027379905364015,-3.4009202547858592,-3.399479902459035,-3.3983385842594096,-3.3974342171430187,-3.3967176072489629,-3.3961497739501745,-3.3956998294634673,-3.3953432986780498,-3.3950607878078607,-3.3948369294476848,-3.3946595466482457,-3.3945189905394884,-3.3944076154710174,-3.3943193631198767,-3.3942494329423845,-3.3941940210442354,-3.3941501132642173,-3.3941153212162547,-3.3940877523710675,-3.3940659071104662,-3.3940485971543133,-3.3940348809231722,-3.3940240123202443,-3.3940154001469764,-3.3940085759443264,-3.3940031685106042,-3.3939988837097559,-3.3939954884716457,-3.3939927981140343,-3.393990666296741,-3.3939889770613725,-3.3939876385237397,-3.393986577875765,-3.3939857374250693,-3.3939850714568252,-3.3939845437470311,-3.3939841255921515,-3.3939837942477666],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion1: TB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(44,160,44,1)","width":2},"marker":{"color":"rgba(44,160,44,1)","size":3,"line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level4">
<h4 id="shock-2">Shock 2<a class="anchor" aria-label="anchor" href="#shock-2"></a>
</h4>
<p>Another example implements an increase in government expenditures in
the South.</p>
<p>First, initialize an empty shock object:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty shock</span></span>
<span><span class="va">shock_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_shock.html">create_shock</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Shock object created</span></span></code></pre></div>
<p>Add an appropriate equation:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add shock equation with increased government expenditures of the South</span></span>
<span><span class="va">shock_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_shock.html">add_shock</a></span><span class="op">(</span><span class="va">shock_reg</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"G_S"</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"An increase of government expenditures of the South"</span>,</span>
<span>  start <span class="op">=</span> <span class="fl">5</span>, end <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Integrate the shock into the model by creating a new scenario:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create new scenario with this shock</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_scenario.html">add_scenario</a></span><span class="op">(</span><span class="va">model_reg</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"expansion2"</span>, origin <span class="op">=</span> <span class="st">"baseline"</span>,</span>
<span>  origin_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  origin_end <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  shock <span class="op">=</span> <span class="va">shock_reg</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Simulate the model with the shock applied:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate shock</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_reg</span>,</span>
<span>  scenario <span class="op">=</span> <span class="st">"expansion2"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, periods <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Gauss"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Simulating scenario expansion2 (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Visualize the results for the shock scenario:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">model_reg</span>, scenario <span class="op">=</span> <span class="st">"expansion2"</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"deltaV_S = V_S - dplyr::lag(V_S)"</span>,</span>
<span>    <span class="st">"GB_S = TX_S - (G_S + dplyr::lag(r) * dplyr::lag(Bh_S))"</span>,</span>
<span>    <span class="st">"TB_S = X_S - IM_S"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:100%;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"visdat":{"1507e62d40280":["function () ","plotlyVisDat"]},"cur_data":"1507e62d40280","attrs":{"1507e62d40280":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,10.909089678917976,9.5163831736381752,8.3049473476136626,9.4221731820921306,8.1665463997278778,7.0823710098854207,6.1449327751182494,5.3338456928468361,4.6316525739533745,4.023387126044895,3.4962043053160698,3.0390680086518529,2.6424867941798595,2.2982898977142128,1.9994371135907159,1.7398571818567063,1.5143102107456201,1.3182703973311476,1.1478259175408425,0.99959336162244483,0.87064451093201001,0.75844360147324608,0.66079351118067109,0.57578955153219624,0.50177974792931934,0.43733066416071154,0.38119796974405062,0.33230106960853334,0.28970121723556019,0.25258261814848026,0.22023610313320319,0.19204501193257784,0.16747298017804724,0.14605336648997991,0.12738009423388519,0.11109971439941546,0.096904523336661441,0.084526592366657383,0.07373258618672196,0.06431926402900956,0.056109572130566221,0.048949248599541306,0.04270387252124408,0.037256298396258103,0.032504424963036627,0.0283592543143385,0.024743203126703861,0.021588632923439377,0.018836570695000887],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion2: deltaV_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e62d40280.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,-10.909089687282084,-9.5163831922353275,-8.3049473771419819,-10.435686807689271,-9.2816077738549261,-8.2791863318434267,-7.4075049874719561,-6.6493079526051808,-5.9896557309741603,-5.4156070786988906,-4.9159457533069997,-4.4809457406849411,-4.1021693390073395,-3.7722933357327761,-3.4849592339285387,-3.2346440904296401,-3.0165490395060708,-2.8265030074127928,-2.6608794883620455,-2.5165245618229797,-2.3906945935463959,-2.2810022857628773,-2.1853699318136073,-2.1019888922220815,-2.029284447238318,-1.9658852988182502,-1.9105970958905445,-1.8623794431785115,-1.8203259279471027,-1.7836467626578063,-1.751653696181581,-1.7237468932439555,-1.699403522265996,-1.6781678266575248,-1.6596424847153699,-1.6434810892578113,-1.6293816005686921,-1.6170806456245472,-1.6063485533600605,-1.5969850302529309,-1.5888153930897282,-1.5816872866760079,-1.5754678237056048,-1.5700410922019827,-1.5653059830597194,-1.5611742963895949,-1.5575690907357931,-1.5544232438932326,-1.5516781981036658],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion2: GB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e62d40280.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,0,0,0,-1.0135135330330929,-1.1150612549100014,-1.1968151874501896,-1.2625720643918648,-1.3154620999668794,-1.3580029868345775,-1.3922197733391677,-1.4197412606636206,-1.4418775376763335,-1.4596823443063816,-1.4740032320939491,-1.4855219096783507,-1.4947866937658585,-1.5022386103213243,-1.5082323884628366,-1.5130533464193974,-1.516930973363575,-1.5200498536470484,-1.5225584534589274,-1.5245761881727127,-1.5261991068048282,-1.5275044641783673,-1.5285543984381214,-1.5293988889754466,-1.5300781355673472,-1.530624471982275,-1.5310639051451815,-1.5314173531295836,-1.5317016409080786,-1.531930301261422,-1.5321142189713868,-1.5322621489624915,-1.5323811330574735,-1.5324768351848839,-1.5325538109957471,-1.5326157247234669,-1.5326655236101097,-1.5327055782022505,-1.5327377951946239,-1.5327637081934071,-1.5327845507195725,-1.5328013149273723,-1.5328147988333676,-1.5328256443038413,-1.5328343676092366,-1.5328413839998269],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion2: TB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":70,"l":60,"t":60,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"time"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92000000000000004},"title":{"text":"Scenario expansion2","y":0.94999999999999996,"x":0.5,"xanchor":"center","yanchor":"top"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[10.909089678917976,9.5163831736381752,8.3049473476136626,9.4221731820921306,8.1665463997278778,7.0823710098854207,6.1449327751182494,5.3338456928468361,4.6316525739533745,4.023387126044895,3.4962043053160698,3.0390680086518529,2.6424867941798595,2.2982898977142128,1.9994371135907159,1.7398571818567063,1.5143102107456201,1.3182703973311476,1.1478259175408425,0.99959336162244483,0.87064451093201001,0.75844360147324608,0.66079351118067109,0.57578955153219624,0.50177974792931934,0.43733066416071154,0.38119796974405062,0.33230106960853334,0.28970121723556019,0.25258261814848026,0.22023610313320319,0.19204501193257784,0.16747298017804724,0.14605336648997991,0.12738009423388519,0.11109971439941546,0.096904523336661441,0.084526592366657383,0.07373258618672196,0.06431926402900956,0.056109572130566221,0.048949248599541306,0.04270387252124408,0.037256298396258103,0.032504424963036627,0.0283592543143385,0.024743203126703861,0.021588632923439377,0.018836570695000887],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion2: deltaV_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[-10.909089687282084,-9.5163831922353275,-8.3049473771419819,-10.435686807689271,-9.2816077738549261,-8.2791863318434267,-7.4075049874719561,-6.6493079526051808,-5.9896557309741603,-5.4156070786988906,-4.9159457533069997,-4.4809457406849411,-4.1021693390073395,-3.7722933357327761,-3.4849592339285387,-3.2346440904296401,-3.0165490395060708,-2.8265030074127928,-2.6608794883620455,-2.5165245618229797,-2.3906945935463959,-2.2810022857628773,-2.1853699318136073,-2.1019888922220815,-2.029284447238318,-1.9658852988182502,-1.9105970958905445,-1.8623794431785115,-1.8203259279471027,-1.7836467626578063,-1.751653696181581,-1.7237468932439555,-1.699403522265996,-1.6781678266575248,-1.6596424847153699,-1.6434810892578113,-1.6293816005686921,-1.6170806456245472,-1.6063485533600605,-1.5969850302529309,-1.5888153930897282,-1.5816872866760079,-1.5754678237056048,-1.5700410922019827,-1.5653059830597194,-1.5611742963895949,-1.5575690907357931,-1.5544232438932326,-1.5516781981036658],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion2: GB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(255,127,14,1)","width":2},"marker":{"color":"rgba(255,127,14,1)","size":3,"line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[0,0,0,0,-1.0135135330330929,-1.1150612549100014,-1.1968151874501896,-1.2625720643918648,-1.3154620999668794,-1.3580029868345775,-1.3922197733391677,-1.4197412606636206,-1.4418775376763335,-1.4596823443063816,-1.4740032320939491,-1.4855219096783507,-1.4947866937658585,-1.5022386103213243,-1.5082323884628366,-1.5130533464193974,-1.516930973363575,-1.5200498536470484,-1.5225584534589274,-1.5245761881727127,-1.5261991068048282,-1.5275044641783673,-1.5285543984381214,-1.5293988889754466,-1.5300781355673472,-1.530624471982275,-1.5310639051451815,-1.5314173531295836,-1.5317016409080786,-1.531930301261422,-1.5321142189713868,-1.5322621489624915,-1.5323811330574735,-1.5324768351848839,-1.5325538109957471,-1.5326157247234669,-1.5326655236101097,-1.5327055782022505,-1.5327377951946239,-1.5327637081934071,-1.5327845507195725,-1.5328013149273723,-1.5328147988333676,-1.5328256443038413,-1.5328343676092366,-1.5328413839998269],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion2: TB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(44,160,44,1)","width":2},"marker":{"color":"rgba(44,160,44,1)","size":3,"line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level4">
<h4 id="shock-3">Shock 3<a class="anchor" aria-label="anchor" href="#shock-3"></a>
</h4>
<p>In the final example, we suggest applying an increase to the
propensity to save among Southern households.</p>
<p>First, initialize an empty shock:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create empty shock</span></span>
<span><span class="va">shock_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_shock.html">create_shock</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Shock object created</span></span></code></pre></div>
<p>Add an appropriate equation:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Add shock equation with increased government expenditures of the South</span></span>
<span><span class="va">shock_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_shock.html">add_shock</a></span><span class="op">(</span><span class="va">shock_reg</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"alpha1_S"</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">.6</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Increased propensity to save of the Southern households"</span>,</span>
<span>  start <span class="op">=</span> <span class="fl">5</span>, end <span class="op">=</span> <span class="fl">50</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Integrate the shock into the model by creating a new scenario:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create new scenario with this shock</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_scenario.html">add_scenario</a></span><span class="op">(</span><span class="va">model_reg</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"expansion3"</span>, origin <span class="op">=</span> <span class="st">"baseline"</span>,</span>
<span>  origin_start <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  origin_end <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  shock <span class="op">=</span> <span class="va">shock_reg</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Run the simulation with the shock applied:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulate shock</span></span>
<span><span class="va">model_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/simulate_scenario.html">simulate_scenario</a></span><span class="op">(</span><span class="va">model_reg</span>,</span>
<span>  scenario <span class="op">=</span> <span class="st">"expansion3"</span>, max_iter <span class="op">=</span> <span class="fl">350</span>, periods <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  hidden_tol <span class="op">=</span> <span class="fl">0.1</span>, tol <span class="op">=</span> <span class="fl">1e-08</span>, method <span class="op">=</span> <span class="st">"Gauss"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Simulating scenario expansion3 (1 of 1)</span></span>
<span><span class="co">#&gt; Scenario(s) successfully simulated</span></span></code></pre></div>
<p>Finally, plot the simulation outcomes:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_simulation.html">plot_simulation</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">model_reg</span>, scenario <span class="op">=</span> <span class="st">"expansion3"</span>, from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  expressions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"deltaV_S = V_S - dplyr::lag(V_S)"</span>,</span>
<span>    <span class="st">"GB_S = TX_S - (G_S + dplyr::lag(r) * dplyr::lag(Bh_S))"</span>,</span>
<span>    <span class="st">"TB_S = X_S - IM_S"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:100%;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"visdat":{"1507e6c441736":["function () ","plotlyVisDat"]},"cur_data":"1507e6c441736","attrs":{"1507e6c441736":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,10.909089678917976,9.5163831736381752,8.3049473476136626,9.8581529128525887,8.7602154447241105,7.7815830750171742,6.9106256052194581,6.1358115970141895,5.4467835139551823,4.8342501731438858,4.2898867691716305,3.8062422971596277,3.3766539186189561,2.9951690474953381,2.656473495573664,2.3558263709241913,2.0890009422970763,1.8522309101268775,1.6421620136952129,1.4558085277682693,1.2905137343742155,1.1439146362832133,1.013910227291376,0.89863304652568843,0.79642370526521233,0.70580809847785986,0.62547703647192066,0.55426805441912563,0.49114919518906675,0.43520445261896157,0.38562101097328139,0.34167764173118087,0.3027344792669453,0.26822394076192779,0.23764261199852399,0.21054404142769556,0.18653233423474092,0.1652564593402559,0.14640519140981212,0.12970261819157258,0.11490415092738715,0.10179298225965283,0.090176942052934805,0.079885706925566069,0.070768324102829183,0.062691014513518439,0.055535223903333986,0.049195894181551125,0.043579930287577895],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion3: deltaV_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e6c441736.1":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[null,-10.909089687282084,-9.5163831922353275,-8.3049473771419819,-8.921804127768258,-7.9255223582893777,-7.0404723664556457,-6.2553277548055846,-5.5588984470923162,-4.941231430079803,-4.3934768737026211,-3.9077684166673059,-3.477115910420558,-3.0953096442692463,-2.7568343753507527,-2.4567928854656778,-2.1908375949214545,-1.9551095698243586,-1.7461842666032581,-1.5610230763469168,-1.3969301598658745,-1.2515141603049003,-1.1226540511058118,-1.008468783807821,-0.90729030458538062,-0.81763957307364166,-0.73820525547155569,-0.66782479858958155,-0.6054676227467688,-0.5502202300330481,-0.50127283656132349,-0.45790776694993696,-0.419489024696027,-0.38545288209611073,-0.35529979176821413,-0.32858707278137445,-0.30492245109852689,-0.2839583311619478,-0.2653867163585133,-0.24893470526161465,-0.23436049870749187,-0.22144986002734868,-0.21001297722022372,-0.19988168159919795,-0.19090698255450178,-0.18295688261933662,-0.1759144410601472,-0.16967605779855433,-0.16414995265608212,-0.15925481774001682],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion3: GB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true},"1507e6c441736.2":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":[0,0,0,0,0.93634873909349636,0.8346929379751149,0.74111057064779651,0.65529772308336653,0.5769130330413148,0.5055519771831829,0.44077320258161201,0.38211826505477831,0.32912623277325537,0.28134413519154933,0.23833454725773784,0.19968049887263106,0.16498867774304671,0.13389125705065119,0.10604648774936543,0.081138787075316188,0.058878224157279391,0.038999437569680495,0.021260456388001003,0.0054413226640317447,-0.0086573708143244943,-0.021215972533752847,-0.03239725382720593,-0.04234785127494689,-0.051199650082530468,-0.05907107585969662,-0.066068401319931525,-0.072286817521421298,-0.077811438499137964,-0.082718452725179858,-0.087075895632400702,-0.090944500499402281,-0.094378444826947572,-0.097426027858345421,-0.10013028404461544,-0.10252953727726855,-0.10465790062732516,-0.10654572616696356,-0.10822000923561248,-0.10970475126488921,-0.11102128501027941,-0.11218856576375025,-0.11322343184780159,-0.11414083742383596,-0.11495406039051304,-0.11567488790269032],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion3: TB_S","hovertemplate":"Time: %{x: 0f} <br> Value %{y:0f}","type":"scatter","mode":"lines+markers","line":{"width":2},"marker":{"size":3},"inherit":true}},"layout":{"margin":{"b":70,"l":60,"t":60,"r":10},"spikedistance":1000,"hovermode":"spikers","xaxis":{"domain":[0,1],"automargin":true,"title":"time"},"showlegend":true,"legend":{"xanchor":"left","x":1.02,"y":0.92000000000000004},"title":{"text":"Scenario expansion3","y":0.94999999999999996,"x":0.5,"xanchor":"center","yanchor":"top"},"yaxis":{"domain":[0,1],"automargin":true,"title":[]}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"y":[10.909089678917976,9.5163831736381752,8.3049473476136626,9.8581529128525887,8.7602154447241105,7.7815830750171742,6.9106256052194581,6.1358115970141895,5.4467835139551823,4.8342501731438858,4.2898867691716305,3.8062422971596277,3.3766539186189561,2.9951690474953381,2.656473495573664,2.3558263709241913,2.0890009422970763,1.8522309101268775,1.6421620136952129,1.4558085277682693,1.2905137343742155,1.1439146362832133,1.013910227291376,0.89863304652568843,0.79642370526521233,0.70580809847785986,0.62547703647192066,0.55426805441912563,0.49114919518906675,0.43520445261896157,0.38562101097328139,0.34167764173118087,0.3027344792669453,0.26822394076192779,0.23764261199852399,0.21054404142769556,0.18653233423474092,0.1652564593402559,0.14640519140981212,0.12970261819157258,0.11490415092738715,0.10179298225965283,0.090176942052934805,0.079885706925566069,0.070768324102829183,0.062691014513518439,0.055535223903333986,0.049195894181551125,0.043579930287577895],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion3: deltaV_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(31,119,180,1)","width":2},"marker":{"color":"rgba(31,119,180,1)","size":3,"line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[-10.909089687282084,-9.5163831922353275,-8.3049473771419819,-8.921804127768258,-7.9255223582893777,-7.0404723664556457,-6.2553277548055846,-5.5588984470923162,-4.941231430079803,-4.3934768737026211,-3.9077684166673059,-3.477115910420558,-3.0953096442692463,-2.7568343753507527,-2.4567928854656778,-2.1908375949214545,-1.9551095698243586,-1.7461842666032581,-1.5610230763469168,-1.3969301598658745,-1.2515141603049003,-1.1226540511058118,-1.008468783807821,-0.90729030458538062,-0.81763957307364166,-0.73820525547155569,-0.66782479858958155,-0.6054676227467688,-0.5502202300330481,-0.50127283656132349,-0.45790776694993696,-0.419489024696027,-0.38545288209611073,-0.35529979176821413,-0.32858707278137445,-0.30492245109852689,-0.2839583311619478,-0.2653867163585133,-0.24893470526161465,-0.23436049870749187,-0.22144986002734868,-0.21001297722022372,-0.19988168159919795,-0.19090698255450178,-0.18295688261933662,-0.1759144410601472,-0.16967605779855433,-0.16414995265608212,-0.15925481774001682],"x":[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion3: GB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(255,127,14,1)","width":2},"marker":{"color":"rgba(255,127,14,1)","size":3,"line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"y":[0,0,0,0,0.93634873909349636,0.8346929379751149,0.74111057064779651,0.65529772308336653,0.5769130330413148,0.5055519771831829,0.44077320258161201,0.38211826505477831,0.32912623277325537,0.28134413519154933,0.23833454725773784,0.19968049887263106,0.16498867774304671,0.13389125705065119,0.10604648774936543,0.081138787075316188,0.058878224157279391,0.038999437569680495,0.021260456388001003,0.0054413226640317447,-0.0086573708143244943,-0.021215972533752847,-0.03239725382720593,-0.04234785127494689,-0.051199650082530468,-0.05907107585969662,-0.066068401319931525,-0.072286817521421298,-0.077811438499137964,-0.082718452725179858,-0.087075895632400702,-0.090944500499402281,-0.094378444826947572,-0.097426027858345421,-0.10013028404461544,-0.10252953727726855,-0.10465790062732516,-0.10654572616696356,-0.10822000923561248,-0.10970475126488921,-0.11102128501027941,-0.11218856576375025,-0.11322343184780159,-0.11414083742383596,-0.11495406039051304,-0.11567488790269032],"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],"name":"expansion3: TB_S","hovertemplate":["Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}","Time: %{x: 0f} <br> Value %{y:0f}"],"type":"scatter","mode":"lines+markers","line":{"color":"rgba(44,160,44,1)","width":2},"marker":{"color":"rgba(44,160,44,1)","size":3,"line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<p>For more details on REG model, refer to Chapter 6 of <em>Monetary
Economics. An Integrated Approach to Credit, Money, Income, Production
and Wealth.</em></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">

</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
